<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>La Trinidad - Pedidos</title>
    <style>
        :root { --primary: #8b0000; --gold: #d4af37; --bg: #fdf5e6; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); margin: 0; padding: 10px; color: #333; overflow-x: hidden; }
        
        #bloqueo { display: none; position: fixed; inset: 0; background: white; z-index: 10000; text-align: center; padding-top: 20%; }
        header { text-align: center; border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-bottom: 15px; }
        .logo { font-weight: bold; font-size: 24px; color: var(--primary); text-transform: uppercase; }
        
        .client-form { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 10px; }
        .client-form input, .client-form textarea { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 14px; }
        .client-form textarea { resize: none; height: 60px; }
        
        #menu-container { padding-bottom: 140px; } /* Espacio para que el botón no tape el menú */
        .category-title { background: var(--primary); color: white; padding: 8px; border-radius: 4px; margin-top: 15px; font-size: 14px; }
        .product-card { display: flex; justify-content: space-between; align-items: center; background: white; padding: 10px; margin: 8px 0; border-radius: 8px; border-left: 4px solid var(--gold); }
        .product-info { flex-grow: 1; font-size: 14px; }
        .price { color: var(--primary); font-weight: bold; }
        
        .controls { display: flex; align-items: center; gap: 8px; }
        .btn-qty { background: var(--primary); color: white; border: none; width: 28px; height: 28px; border-radius: 50%; font-size: 18px; cursor: pointer; }
        .qty-val { font-weight: bold; min-width: 15px; text-align: center; }
        
        .footer-action { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 10px; border-top: 1px solid #ddd; text-align: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 999; }
        .total-box { font-weight: bold; font-size: 18px; color: var(--primary); margin-bottom: 5px; }
        .btn-send { background: #25d366; color: white; border: none; padding: 10px 20px; border-radius: 25px; font-weight: bold; width: 85%; font-size: 16px; cursor: pointer; }
        .copyright { font-size: 9px; color: #777; margin-top: 5px; text-transform: uppercase; }
    </style>
</head>
<body>

<div id="bloqueo"><h1>Suscripción Vencida</h1><p>Contacte al administrador.</p></div>

<header>
    <div class="logo">La Trinidad</div>
    <div style="font-size: 11px;">Domicilios: 305 379 2414</div>
</header>

<div class="client-form">
    <strong>Datos del Cliente</strong>
    <input type="text" id="nombre" placeholder="Nombre completo">
    <input type="text" id="direccion" placeholder="Dirección">
    <input type="tel" id="celular" placeholder="Celular">
    <textarea id="observaciones" placeholder="Observaciones adicionales (Ej: sin cebolla, traer cambio...)"></textarea>
</div>

<div id="menu-container"></div>

<div class="footer-action">
    <div class="total-box">TOTAL: $<span id="total-val">0</span></div>
    <button class="btn-send" onclick="enviarPedido()">PEDIR POR WHATSAPP</button>
    <div class="copyright">App desarrollada por VIBRAS POSITIVAS © DERECHO DE AUTOR</div>
</div>

<script>
    const FECHA_VENCIMIENTO = "2026-12-31";
    if (new Date() > new Date(FECHA_VENCIMIENTO)) document.getElementById('bloqueo').style.display = 'block';

    const menu = [
        { cat: "DESAYUNOS", items: [{n: "Desayuno del lago", p: 17000}, {n: "Huevos rancheros", p: 17000}, {n: "Huevos jamón", p: 19000}, {n: "Calentado huevo", p: 19000}, {n: "Calentado carne", p: 21000}]},
        { cat: "SALMONES", items: [{n: "Salmón Marinera", p: 73000}, {n: "Salmón Casa", p: 64000}, {n: "Salmón Plancha", p: 61000}, {n: "Salmón Passion", p: 64000}]},
        { cat: "CARNES", items: [{n: "Baby Beef", p: 51000}, {n: "Punta de Anca", p: 51000}, {n: "Filet Mignon", p: 54000}, {n: "Arroz Camarón", p: 51000}, {n: "Pechuga Plancha", p: 41000}]},
        { cat: "COMIDAS RÁPIDAS", items: [{n: "Hamb. Especial", p: 27000}, {n: "Hamb. Mignon", p: 31000}, {n: "Perro Caliente", p: 21000}, {n: "Salchipapas", p: 21000}]},
        { cat: "MAICITOS Y OTROS", items: [{n: "Maicito Pollo", p: 27000}, {n: "Maicito Mixto", p: 30000}, {n: "Deditos Queso x3", p: 15000}, {n: "Pincho Pollo", p: 32000}]},
        { cat: "BEBIDAS Y POSTRES", items: [{n: "Limonada Natural", p: 13000}, {n: "Limonada Coco", p: 15000}, {n: "Banana Split", p: 22000}, {n: "Mandarina", p: 15000}]}
    ];

    const cantidades = {};
    const container = document.getElementById('menu-container');

    menu.forEach(section => {
        let html = `<div class="category-title">${section.cat}</div>`;
        section.items.forEach(item => {
            cantidades[item.n] = 0;
            html += `
                <div class="product-card">
                    <div class="product-info"><strong>${item.n}</strong><br><span class="price">$${item.p.toLocaleString()}</span></div>
                    <div class="controls">
                        <button class="btn-qty" onclick="changeQty('${item.n}', -1)">-</button>
                        <span class="qty-val" id="qty-${item.n}">0</span>
                        <button class="btn-qty" onclick="changeQty('${item.n}', 1)">+</button>
                    </div>
                </div>`;
        });
        container.innerHTML += html;
    });

    function changeQty(name, val) {
        cantidades[name] = Math.max(0, cantidades[name] + val);
        document.getElementById(`qty-${name}`).innerText = cantidades[name];
        actualizarTotal();
    }

    function actualizarTotal() {
        let total = 0;
        menu.forEach(s => s.items.forEach(i => total += i.p * cantidades[i.n]));
        document.getElementById('total-val').innerText = total.toLocaleString();
    }

    function enviarPedido() {
        const nom = document.getElementById('nombre').value;
        const dir = document.getElementById('direccion').value;
        const obs = document.getElementById('observaciones').value;
        let total = 0, lista = "";
        
        menu.forEach(s => s.items.forEach(i => {
            if (cantidades[i.n] > 0) {
                let sub = i.p * cantidades[i.n];
                total += sub;
                lista += `*${i.n}* x${cantidades[i.n]} - $${sub.toLocaleString()}\n`;
            }
        }));

        if (total === 0) return alert("Agrega productos al pedido");
        if (!nom || !dir) return alert("Completa nombre y dirección");

        const msg = `*FACTURA - LA TRINIDAD*\n------------------\n*Cliente:* ${nom}\n*Dir:* ${dir}\n*Obs:* ${obs || 'Ninguna'}\n------------------\n${lista}------------------\n*TOTAL: $${total.toLocaleString()}*\n\n_App por Vibras Positivas_`;
        window.open(`https://wa.me/573053792414?text=${encodeURIComponent(msg)}`);
    }
</script>
</body>
</html>
