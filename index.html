<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App La Trinidad - Vibras Positivas</title>
    <style>
        :root { --primario: #8b0000; --dorado: #d4af37; --fondo: #fdf5e6; }
        body { font-family: 'Arial', sans-serif; background-color: var(--fondo); margin: 0; padding: 10px; padding-bottom: 100px; }
        
        /* Control de Suscripción Invisible */
        #bloqueo { display: none; position: fixed; inset: 0; background: white; z-index: 10000; text-align: center; padding-top: 20%; }

        header { text-align: center; border-bottom: 3px solid var(--primario); padding-bottom: 10px; margin-bottom: 15px; }
        .logo-placeholder { font-weight: bold; font-size: 28px; color: var(--primario); margin: 0; }
        .info-header { font-size: 13px; color: #555; margin-top: 5px; }

        .form-cliente { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; border-left: 5px solid var(--primario); }
        .form-cliente input { width: 94%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; }
        .btn-editar { background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; float: right; cursor: pointer; }

        .categoria { background: var(--primario); color: white; padding: 10px; border-radius: 5px; margin: 20px 0 10px 0; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .plato { background: white; padding: 15px; margin-bottom: 8px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
        .plato-detalle { flex: 1; }
        .plato-nombre { font-weight: bold; font-size: 16px; display: block; color: #333; }
        .plato-precio { color: var(--primario); font-weight: bold; font-size: 15px; }
        
        .controles { display: flex; align-items: center; gap: 12px; }
        .btn-cant { background: #eee; border: 1px solid #ccc; width: 35px; height: 35px; border-radius: 5px; font-size: 20px; font-weight: bold; cursor: pointer; color: var(--primario); }
        .cantidad { font-weight: bold; min-width: 20px; text-align: center; font-size: 18px; }

        .barra-total { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px; border-top: 2px solid var(--primario); display: flex; flex-direction: column; align-items: center; box-shadow: 0 -3px 10px rgba(0,0,0,0.1); }
        .total-texto { font-size: 20px; font-weight: bold; color: var(--primario); margin-bottom: 10px; }
        .btn-whatsapp { background: #25d366; color: white; border: none; padding: 15px 30px; border-radius: 30px; font-size: 18px; font-weight: bold; width: 90%; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        .copy { font-size: 11px; color: #888; margin-top: 8px; text-align: center; }
    </style>
</head>
<body>

<div id="bloqueo">
    <h2>Suscripción Expirada</h2>
    <p>Comuníquese con el desarrollador para renovar el servicio.</p>
</div>

<header>
    <p class="logo-placeholder">LA TRINIDAD</p>
    <div class="info-header">DOMICILIOS Y RESERVAS: 305 379 2414<br>Caucasia, Antioquia</div>
</header>

<div class="form-cliente">
    <button class="btn-editar">EDITAR DATOS</button>
    <h3 style="margin: 0 0 10px 0; color: var(--primario);">Datos de Entrega</h3>
    <input type="text" id="nombre" placeholder="Nombre completo">
    <input type="text" id="direccion" placeholder="Dirección exacta">
    <input type="tel" id="celular" placeholder="Número de celular">
</div>

<div id="menu-app"></div>

<div class="barra-total">
    <div class="total-texto">Total a Pagar: $<span id="total-general">0</span></div>
    <button class="btn-whatsapp" onclick="enviarWhatsapp()">ENVIAR PEDIDO A WHATSAPP</button>
    <div class="copy">App desarrollada por VIBRAS POSITIVAS © DERECHO DE AUTOR</div>
</div>

<script>
    // --- CONTROL DE SUSCRIPCIÓN INVISIBLE ---
    const fechaVencimiento = new Date('2026-12-31'); // Puedes cambiar la fecha aquí
    if (new Date() > fechaVencimiento) {
        document.getElementById('bloqueo').style.display = 'block';
    }

    // --- BASE DE DATOS DE PLATOS (Extraídos de las fotos) ---
    const datosMenu = [
        { categoria: "Desayunos del Lago", platos: [
            { n: "Huevos rancheros", p: 23000 },
            { n: "Salmón a la plancha", p: 35000 },
            { n: "Perro caliente especial", p: 18000 },
            { n: "Hamburguesa especial", p: 25000 },
            { n: "Perras", p: 15000 }
        ]},
        { categoria: "Carnes (Cortes Finos)", platos: [
            { n: "Chopa de Solomito", p: 35000 },
            { n: "Punta de Anca", p: 35000 },
            { n: "Pechuga a la Plancha", p: 28000 },
            { n: "Solomito al Gusto", p: 35000 },
            { n: "Carne Asada", p: 25000 }
        ]},
        { categoria: "Maicitos y Crepes", platos: [
            { n: "Crepe de Pollo", p: 13000 },
            { n: "Maicito de Pollo", p: 18000 },
            { n: "Maicito de Res", p: 18000 },
            { n: "Maicito Trifásico", p: 22000 },
            { n: "Banana Split", p: 15000 }
        ]},
        { categoria: "Bebidas", platos: [
            { n: "Limonada Natural", p: 7000 },
            { n: "Limonada de Coco", p: 12000 },
            { n: "Limonada Cerezada", p: 12000 },
            { n: "Limonada Tropical", p: 12000 },
            { n: "Jugos Naturales", p: 8000 },
            { n: "Malteadas Varias", p: 15000 }
        ]}
    ];

    const carrito = {};

    // Renderizar el Menú
    function renderMenu() {
        const contenedor = document.getElementById('menu-app');
        let html = '';
        datosMenu.forEach(cat => {
            html += `<div class="categoria">${cat.categoria}</div>`;
            cat.platos.forEach(plato => {
                html += `
                    <div class="plato">
                        <div class="plato-detalle">
                            <span class="plato-nombre">${plato.n}</span>
                            <span class="plato-precio">$${plato.p.toLocaleString()}</span>
                        </div>
                        <div class="controles">
                            <button class="btn-cant" onclick="actualizar('${plato.n}', ${plato.p}, -1)">-</button>
                            <span class="cantidad" id="cant-${plato.n}">0</span>
                            <button class="btn-cant" onclick="actualizar('${plato.n}', ${plato.p}, 1)">+</button>
                        </div>
                    </div>`;
            });
        });
        contenedor.innerHTML = html;
    }

    function actualizar(nombre, precio, cambio) {
        if (!carrito[nombre]) carrito[nombre] = { cant: 0, precio: precio };
        carrito[nombre].cant += cambio;
        if (carrito[nombre].cant < 0) carrito[nombre].cant = 0;
        
        document.getElementById(`cant-${nombre}`).innerText = carrito[nombre].cant;
        calcularTotal();
    }

    function calcularTotal() {
        let total = 0;
        for (let key in carrito) {
            total += carrito[key].cant * carrito[key].precio;
        }
        document.getElementById('total-general').innerText = total.toLocaleString();
    }

    function enviarWhatsapp() {
        const nom = document.getElementById('nombre').value;
        const dir = document.getElementById('direccion').value;
        const cel = document.getElementById('celular').value;

        if (!nom || !dir || !cel) return alert("Por favor complete los datos del cliente");

        let totalFinal = 0;
        let lineasPedido = "";

        for (let item in carrito) {
            if (carrito[item].cant > 0) {
                let subtotal = carrito[item].cant * carrito[item].precio;
                totalFinal += subtotal;
                lineasPedido += `✅ ${item} (x${carrito[item].cant}) - Subt: $${subtotal.toLocaleString()}\n`;
            }
        }

        if (totalFinal === 0) return alert("El pedido está vacío");

        const mensaje = 
            `*FACTURA - RESTAURANTE LA TRINIDAD*\n` +
            `----------------------------------\n` +
            `*CLIENTE:* ${nom}\n` +
            `*DIRECCIÓN:* ${dir}\n` +
            `*TEL:* ${cel}\n` +
            `----------------------------------\n` +
            `${lineasPedido}` +
            `----------------------------------\n` +
            `*TOTAL A PAGAR: $${totalFinal.toLocaleString()}*\n\n` +
            `App por *Vibras Positivas* ©`;

        const url = `https://wa.me/573053792414?text=${encodeURIComponent(mensaje)}`;
        window.open(url, '_blank');
    }

    renderMenu();
</script>

</body>
</html>
